{% from "nginx/macros.jinja" import listen_addresses %}

server {
    {{ listen_addresses(port=port, default_server=True, use_x_forwarded=use_x_forwarded) }}

    server_name _; # serves requests that match nothing else

    access_log /var/log/nginx/catchall.access.log;
    error_log /var/log/nginx/catchall.error.log;

    # Serve nginx status to localhost clients
    location /nginx_status {
        stub_status on;
        allow 127.0.0.1;
        deny all;
    }

    return 301 http://habhub.org/;
}
